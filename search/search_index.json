{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome","text":"Isaiah Johnston Datasheet as part of  Garden Buddy: Moisture Sensor for  Team 201","tags":["tag1","tag2"]},{"location":"#introduction","title":"Introduction","text":"<ul> <li>These pages describe the construction and function of the moisture sensing PCB of the Garden Buddy smart irrigation system.</li> </ul>","tags":["tag1","tag2"]},{"location":"#project-summary","title":"Project Summary","text":"<ul> <li>This capacitive moisture sensor provides data to the pump of the Garden Buddy, controlling the amount of water recived by the target pants.</li> <li>A data sheet detailing the full Garden Buddy system can be found here.</li> </ul>","tags":["tag1","tag2"]},{"location":"#my-contribution","title":"My Contribution","text":"<ul> <li>Team 201 has developed a smart irrigation system to improve and streamline the workflow of hobbyist gardeners and small scale farmers.</li> <li>For a general view of the components of the sensor go to \"Block Diagram\"</li> <li>For a descroption of the thought process behind compontents used for the sesor go to \"Component selection\"</li> <li>For a list of the material used to construct the sensor go to \"BOM\"</li> <li>To view the schematic of this sensor go to \"Schematic\"</li> <li>To view a breakdown of how power moves through the sensor go to \"Power Budget\"</li> </ul>","tags":["tag1","tag2"]},{"location":"01-Block-Diagram/Block-Diagram/","title":"Moisture Sensor Block Diagram","text":"","tags":["Moisture Sensor"]},{"location":"01-Block-Diagram/Block-Diagram/#overview","title":"Overview","text":"<p>This moisture sensor block diagram exists to show the basic construction of the sensing subsystem of the Garden Buddy product. The 9V power supply takes wall power and coverts it to 9V then sends the power to the 5V voltage regulator. The voltage regulator powers the folloing components.Pin RB0 of the Curiosity Nano will send a square wave to Probe Plate A which will cause a build up of charge in the node. The soil will act as the dielectric in a capacitor, the moisture level of the soil will change its capacitance. When the soil has charged it will discharge into Probe Plate B. The signal is sent to the Op-Amp and low pass filter to be amplified and filtered. The signal is recieved by RA0, the Curiosity Nano process the raw data and sends a high or low signal from RD3 to connector pin 1 allowing the moisture sensor subsystem to motor subsystem which acts as a hub. Pin RE0 sends a \"proof of life\" high signal to the hub and then to the speaker which will sound the alarm if the sensor is broken or shorted. The Debug LED recives a signal from RC7 to aid in proofing code. </p>","tags":["Moisture Sensor"]},{"location":"01-Block-Diagram/Block-Diagram/#moisture-sensor-block-diagram","title":"Moisture Sensor Block Diagram","text":"","tags":["Moisture Sensor"]},{"location":"02-Component-Selection/Component-Selection/","title":"Moisture Sensor Component Selection","text":"<p>Sensing and Probe Plate</p> Solution Pros Cons Option 1.* Type: Interdigitated CombManufacturer: Peralta (made in house) * High sensitivity area of plate* Good signal to noise ratio* Low draw allows continuous sensing * High influence from air pockets* Salty soils can cause shorts. * Hard to clean.  Option 2. * Type: Parallel Plates* Manufacturer: Peralta (made in house) * Design use only * Easy to design and etch * Low cost  * Low risk of shorting * Low overall capacitance * Low range of measurement * Non-uniform sensing region (back and front of probe) Option 3.* Type: Multi-layer* Manufacturer: Peralta (made in house) * High sensitivity in bulk soil* Deep measurement* pairs can be chained to measure at different soil depths * Higher manufacturing tolerances* Higher cost* Probe stiffness makes it susceptible to cracking <p>Choice:Interdigitated Comb</p> <p>Rationale: The interdigitated comb design has a larger excite and sensing region when compared to a paralel plate design of the same volume. The comb design is easier and cheaper to manucatur than the layered design due to its acceptable tolerence range.</p> <p>Op-Amp Buffer</p> Solution Pros Cons Option 1.* LM358P* Op-Amp buffer* $0.27/eachDigikey * Resilient under heat* Low cost* High surge current tolerance * Higher Vf can reduce efficiency in dry soil* High junction capacitance* Bulky  Option 2. * CA3240EZ* Op-Amp buffer* $3.19/eachDigikey * Fast slew* Low input bias* Good bandwidth * Not rail to rail I/O* Noticable drift with temperature* Input noise  Option 3.* MCP6022-I/P* Op-Amp buffer* $1.86/each*Digikey *Low input bias* Fast slew* Low offset * Low drift with temperature rise*Small baseline drift*At risk of latchup potentially causing damage to the part <p>Choice: MCP6022-I/P</p> <p>Rationale: The MCP6022-I/P will be used for its low bias, and fast slew rate. Consuming minimal power and sending a clean signal.</p> Solution Pros Cons Option 1.* L7805CV* Linear Regulator* $0.50/eachDigikey * Lowest cost* Low noise* No switching spikes * Energy inefficient* Generates heat which could throw readings or introduce condensation* Higher idle drain  Option 2. * TSR 1-2450E* Switching Regulator* $3.40/eachDigikey * Low heat* Energy efficient* Low idle draw * Most expensive* Higher output ripple* Higher electromagnetic interference  Option 3.* LM2596S-5.0* Switching Regulator* $3.32/each*Digikey *Good efficiency* Operates in a wide voltage range* High current headroom * Noisier than other options* High Idle draw* Needs tuning/ Extra QA for productions runs <p>Choice:TSR 1-2450E</p> <p>Rationale: The TSR 1-2450E will be used for its efficiency in stepping down power while producing low heat, and stable output under load.</p> <p>Power Supply</p> Solution Pros Cons Option 1.* 16-00030 AC/DC WALL MOUNT ADAPTER 12V 6W* Wall outlet power supply* $6.77/each*Digikey *Lowest cost* Constant power* Clean supply * Not portable* Limited use without extension cords* Indoor use only  Option 2. * RadioMaster 5000mAh 2S 7.4V Li-ion Battery with XT30 Connector* Rechargeable power supply* $25.99/eachMotionRC * Long runtime* Compact* Easy connection * Highest cost* Performance loss at freezing and high heat* Risk of over voltage spikes  Option 3.* 2440 BATT HOLDER AA 4 CELL 6\" LEADS* Replacable power supply* $9.68/each*Digikey *User can easily replace cells* Low cost to replace cells* Safer for users than a Li-ion battery *Lower energy density* Not weather proof* More affected by weather than Li-ion <p>Choice:RadioMaster 5000mAh 2S 7.4V Li-ion Battery</p> <p>Rationale: 16-00030 AC/DC WALL MOUNT ADAPTER 12V 6W, will be used for its convenience and easy of use.</p> <p>Connector Header</p> Solution Pros Cons {width=70%)Option 1.* TB002-500-02BE TERMINAL BLOCK, SCREW TYPE, 5.00* Wire connection* $0.40/eachDigikey * Least expensive* Flexible connections* Secure connection * Bulky* Slower assembly/Slow production* Screws can back off with vibration  Option 2. * EBC04MMMD CONN CARDEDGE MALE 8POS 0.100* Board-to-board connection* $2.69/eachDigikey * Compact* Short signal path = good integrity* Makes board easily swapable * No flexibility* Most expensive* Non Locking  Option 3.* 215570-8 CONN DIP HDR IDC 8POS 28AWG PCB* Ribbon connection* $0.81/each*Digikey *Flexible connections* Fast attachment and detachment* Keyed to prevent incorrect plug in * Not sealed* Limited current* No strain relief <p>Choice:215570-8 CONN DIP HDR IDC 8POS 28AWG PCBP</p> <p>Rationale: The 215570-8 CONN DIP HDR IDC 8POS 28AWG PCB will be used for flexibility, modularity, and ease of assembly of the ribbon connection.</p>"},{"location":"03-BOM/BOM/","title":"Moisture Sensor Bill of Materials","text":"","tags":["BOM"]},{"location":"03-BOM/BOM/#overview","title":"Overview","text":"<p>This bill of materials details the components necessary to construct the Garden Buddy moisture sensor subsystem.</p>","tags":["BOM"]},{"location":"03-BOM/BOM/#bill-of-materials","title":"Bill of Materials","text":"<p> Figure 2: Moisture Sensor Bill of Materials.</p>","tags":["BOM"]},{"location":"03-BOM/BOM/#bill-of-materials-resources","title":"Bill of Materials Resources","text":"<p>A PDF of the Bill of Materials is located here. </p>","tags":["BOM"]},{"location":"04-Schematic/schematic/","title":"Schematic","text":""},{"location":"04-Schematic/schematic/#overview","title":"Overview","text":"<p>This schematic is to support the construction and wiring of the sensing PCB of the Garden Buddy</p> <p></p>"},{"location":"04-Schematic/schematic/#resouces","title":"Resouces","text":"<p>The schematic as a PDF download is available here, and the Zip folder of the project here.</p>"},{"location":"05-Power-Budget/Power-Budget/","title":"Garden Buddy Power Budget","text":""},{"location":"05-Power-Budget/Power-Budget/#overview","title":"Overview","text":"<p>This power budget describes the power needs of each major component</p> <p>Capture your power budge as a image to display. Take time to get clean breaks and a well organized layout.</p> <p></p>"},{"location":"05-Power-Budget/Power-Budget/#conclusions","title":"Conclusions","text":"<p>Power needs should be met with the chosen power source. A 1 amp fuse will be put infront of the power source to protect against surges when plugging in the power source.</p>"},{"location":"05-Power-Budget/Power-Budget/#resouces","title":"Resouces","text":"<p>The power budget as a PDF download is available here, and a Microsoft Excel Sheet here.</p>"},{"location":"06-PCB/PCB/","title":"Moisture Sensor PCB","text":""},{"location":"06-PCB/PCB/#overview","title":"Overview","text":"<p>This PCB design is to support fabrication of the sensing PCB of the Garden Buddy</p> <p> </p>"},{"location":"06-PCB/PCB/#resouces","title":"Resouces","text":"<p>The GBR and drill files are available here, and the Zip folder of the project here.</p>"},{"location":"07-Code/Code/","title":"Moisture Sensor Code","text":""},{"location":"07-Code/Code/#overview","title":"Overview","text":"<p>The code located in the zip file below is supposed to send a square wave to the the excite node then time how long it takes the soil to charge. The sense node is supposed to sense the discharge from the soil and send it back to the micro controller. Ideally the time to discharge could be measured and a percentage level could be assigned, from here any soil probed would provide a time of some percentage between two extremes. This code is incomplete and does not fully work. A square wave is generated but it is pulsed, and the timing system is not complete enough to send a signal. However, a change in timing is visible on an oscilloscope depending on the moisture level of the environment.</p>"},{"location":"07-Code/Code/#resouces","title":"Resouces","text":"<p>A zip folder of the moisture sensor code is located here.</p>"},{"location":"08-HardwareV2.0/HardwareV2.0/","title":"Moisture Sensor Version 2.0","text":"","tags":["Moisture Sensor Version 2.0"]},{"location":"08-HardwareV2.0/HardwareV2.0/#version-20","title":"Version 2.0","text":"<p>The next version of this moisture sensing subsystem will be powered by a lithium potassium battery to allow for testing outside. An LCD display will be added to allow the testing team to easily check the readings the micro controller is recieving. A plastic housing will be 3d printed to protect the internal components from water and soil durning testing. The code will be reworked to allow full fuctionallity of the sensing, data display and data transmission.</p>","tags":["Moisture Sensor Version 2.0"]},{"location":"09-Resources/Resources/","title":"Moisture Sensor Resources","text":"","tags":["Resources"]},{"location":"09-Resources/Resources/#overview","title":"Overview","text":"<p>The code located in the link below will send pulsed square waves to the excite node which will be recieved by the sense node after passing through the dielectric of the soil. The debug led should light in a solid color when the soil is too dry, blink rapidly as the soil becomes damp, blink slower when the soil becomes very wet, and turn off when the soil is waterlogged. In its current state the change in time for charging the soil capacitance can only be seen on oscilloscope. the code needs to be altered to send constant square wave, time the capacitance build, and send a high low signal to partner boards.</p>","tags":["Resources"]},{"location":"09-Resources/Resources/#moisture-sensor-code-resources","title":"Moisture Sensor Code Resources","text":"<p>A link containing the moisture sensor code is located here.</p>","tags":["Resources"]}]}